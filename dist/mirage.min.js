var mirage;!function(t){t.version="0.1.0"}(mirage||(mirage={}));var mirage;!function(t){var e=function(){function t(t,e,i,r){this.topLeft=null==t?0:t,this.topRight=null==e?0:e,this.bottomRight=null==i?0:i,this.bottomLeft=null==r?0:r}return t.isEmpty=function(t){return 0===t.topLeft&&0===t.topRight&&0===t.bottomRight&&0===t.bottomLeft},t.isEqual=function(t,e){return t.topLeft===e.topLeft&&t.topRight===e.topRight&&t.bottomRight===e.bottomRight&&t.bottomLeft===e.bottomLeft},t.clear=function(t){t.topLeft=t.topRight=t.bottomRight=t.bottomLeft=0},t.copyTo=function(t,e){e.topLeft=t.topLeft,e.topRight=t.topRight,e.bottomRight=t.bottomRight,e.bottomLeft=t.bottomLeft},t}();t.CornerRadius=e}(mirage||(mirage={}));var mirage;!function(t){!function(t){t[t.left=0]="left",t[t.center=1]="center",t[t.right=2]="right",t[t.stretch=3]="stretch"}(t.HorizontalAlignment||(t.HorizontalAlignment={}));t.HorizontalAlignment;!function(t){t[t.top=0]="top",t[t.center=1]="center",t[t.bottom=2]="bottom",t[t.stretch=3]="stretch"}(t.VerticalAlignment||(t.VerticalAlignment={}));t.VerticalAlignment;!function(t){t[t.horizontal=0]="horizontal",t[t.vertical=1]="vertical"}(t.Orientation||(t.Orientation={}));t.Orientation}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(t){t.invalidateMeasure(),t.invalidateArrange();var e=t.tree.parent;e&&e.invalidateMeasure()}var r=function(){function r(){this.init()}return r.prototype.init=function(){Object.defineProperties(this,{inputs:{value:this.createInputs(),writable:!1},state:{value:this.createState(),writable:!1},tree:{value:this.createTree(),writable:!1},attached:{value:{},writable:!1}}),this.$measurer=this.createMeasurer(),this.$arranger=this.createArranger(),this.$measureBinder=e.NewMeasureBinder(this.state,this.tree,this.$measurer),this.$arrangeBinder=e.NewArrangeBinder(this.state,this.tree,this.$arranger)},r.prototype.createInputs=function(){return{visible:!0,useLayoutRounding:!0,margin:new t.Thickness,width:NaN,height:NaN,minWidth:0,minHeight:0,maxWidth:Number.POSITIVE_INFINITY,maxHeight:Number.POSITIVE_INFINITY,horizontalAlignment:t.HorizontalAlignment.stretch,verticalAlignment:t.VerticalAlignment.stretch,attached:{}}},r.prototype.createState=function(){return{flags:e.LayoutFlags.none,previousAvailable:new t.Size,desiredSize:new t.Size,hiddenDesire:new t.Size,layoutSlot:new t.Rect,arrangedSlot:new t.Rect,lastArranged:new t.Size}},r.prototype.createTree=function(){return e.DefaultLayoutTree()},r.prototype.createMeasurer=function(){var t=this;return e.NewMeasurer(this.inputs,this.state,this.tree,function(e){return t.measureOverride(e)})},r.prototype.createArranger=function(){var t=this;return e.NewArranger(this.inputs,this.state,this.tree,function(e){return t.arrangeOverride(e)})},Object.defineProperty(r.prototype,"visible",{get:function(){return this.inputs.visible},set:function(t){if(this.inputs.visible!==t){this.inputs.visible=t===!0,this.invalidateMeasure();var e=this.tree.parent;e&&e.invalidateMeasure()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"useLayoutRounding",{get:function(){return this.inputs.useLayoutRounding},set:function(t){this.inputs.useLayoutRounding!==t&&(this.inputs.useLayoutRounding=t===!0,this.invalidateMeasure(),this.invalidateArrange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"margin",{get:function(){return this.inputs.margin},set:function(e){t.Thickness.isEqual(this.inputs.margin,e)||(this.inputs.margin=e,i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.inputs.width},set:function(t){this.inputs.width!==t&&(this.inputs.width=t,i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.inputs.height},set:function(t){this.inputs.height!==t&&(this.inputs.height=t,i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minWidth",{get:function(){return this.inputs.minWidth},set:function(t){this.inputs.minWidth!==t&&(this.inputs.minWidth=t,i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minHeight",{get:function(){return this.inputs.minHeight},set:function(t){this.inputs.minHeight!==t&&(this.inputs.minHeight=t,i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this.inputs.maxWidth},set:function(t){this.inputs.maxWidth!==t&&(this.inputs.maxWidth=t,i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxHeight",{get:function(){return this.inputs.maxHeight},set:function(t){this.inputs.maxHeight!==t&&(this.inputs.maxHeight=t,i(this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalAlignment",{get:function(){return this.inputs.horizontalAlignment},set:function(t){this.inputs.horizontalAlignment!==t&&(this.inputs.horizontalAlignment=t,this.invalidateArrange())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"verticalAlignment",{get:function(){return this.inputs.verticalAlignment},set:function(t){this.inputs.verticalAlignment!==t&&(this.inputs.verticalAlignment=t,this.invalidateArrange())},enumerable:!0,configurable:!0}),r.prototype.getAttached=function(t){return this.inputs.attached[t]},r.prototype.setAttached=function(t,e){this.inputs.attached[t]=e},r.prototype.setParent=function(t){if(t){if(t===this.tree.parent)return;this.tree.parent=null,this.onDetached(),this.tree.parent=t,this.onAttached()}else{if(!this.tree.parent)return;this.tree.parent=null,this.onDetached()}},r.prototype.onDetached=function(){this.invalidateMeasure(),this.tree.parent&&this.tree.parent.invalidateMeasure(),t.Rect.clear(this.state.layoutSlot)},r.prototype.onAttached=function(){var i=this.state;t.Size.undef(i.previousAvailable),t.Size.clear(i.arrangedSlot),this.invalidateMeasure(),this.invalidateArrange(),((i.flags&e.LayoutFlags.sizeHint)>0||void 0!==i.lastArranged)&&this.tree.propagateFlagUp(e.LayoutFlags.sizeHint)},r.prototype.walkDeep=function(t){var e=void 0,i=[this];return{current:void 0,step:function(){if(e)for(var r=e.tree.walk(t);r.step();)i.unshift(r.current);return this.current=e=i.shift(),void 0!==this.current},skipBranch:function(){e=void 0}}},r.prototype.invalidateMeasure=function(){this.state.flags|=e.LayoutFlags.measure|e.LayoutFlags.measureHint,this.tree.propagateFlagUp(e.LayoutFlags.measureHint)},r.prototype.doMeasure=function(){return this.$measureBinder()},r.prototype.measure=function(t){return this.$measurer(t)},r.prototype.measureOverride=function(e){for(var i=new t.Size,r=this.tree.walk();r.step();)r.current.measure(e),t.Size.max(i,r.current.state.desiredSize);return i},r.prototype.invalidateArrange=function(){this.state.flags|=e.LayoutFlags.arrange|e.LayoutFlags.arrangeHint,this.tree.propagateFlagUp(e.LayoutFlags.arrangeHint)},r.prototype.doArrange=function(){return this.$arrangeBinder()},r.prototype.arrange=function(t){return this.$arranger(t)},r.prototype.arrangeOverride=function(e){for(var i=new t.Size(e.width,e.height),r=this.tree.walk();r.step();){var n=new t.Rect(0,0,e.width,e.height);r.current.arrange(n)}return i},r.prototype.sizing=function(e,i){var r=this.state;return r.lastArranged&&t.Size.copyTo(r.lastArranged,e),t.Size.copyTo(r.arrangedSlot,i),r.lastArranged=void 0,!0},r.prototype.onSizeChanged=function(t,e){},r}();e.LayoutNode=r}(e=t.core||(t.core={}))}(mirage||(mirage={}));var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},mirage;!function(t){function e(){var e=t.core.DefaultLayoutTree();return e.isLayoutContainer=!0,e.children=[],e.walk=function(t){if(t){var i=e.children.length;return{current:void 0,step:function(){return i--,i<0?(this.current=void 0,!1):(this.current=e.children[i],!0)}}}var i=-1;return{current:void 0,step:function(){return i++,i>=e.children.length?(this.current=void 0,!1):(this.current=e.children[i],!0)}}},e}var i=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),r.prototype.createTree=function(){return e()},r.prototype.measureOverride=function(e){return new t.Size(e.width,e.height)},r.prototype.arrangeOverride=function(e){return new t.Size(e.width,e.height)},Object.defineProperty(r.prototype,"childCount",{get:function(){return this.tree.children.length},enumerable:!0,configurable:!0}),r.prototype.insertChild=function(t,e){var i=this.tree.children;e>=i.length?this.appendChild(t):e<=0?this.prependChild(t):(i.splice(e,0,t),t.setParent(this))},r.prototype.prependChild=function(t){this.tree.children.unshift(t),t.setParent(this)},r.prototype.appendChild=function(t){this.tree.children.push(t),t.setParent(this)},r.prototype.removeChild=function(t){var e=this.tree.children,i=e.indexOf(t);return!(i<0)&&(this.tree.children.splice(i,1),t.setParent(null),!0)},r.prototype.removeChildAt=function(t){var e=this.tree.children;if(t<0||t>=e.length)return null;var i=e.splice(t,1)[0];return i&&i.setParent(null),i},r.prototype.getChildAt=function(t){return this.tree.children[t]},r}(t.core.LayoutNode);t.Panel=i,t.NewPanelTree=e}(mirage||(mirage={}));var mirage;!function(t){function e(t){var e=t.tree.parent;e instanceof i&&e.invalidateMeasure(),t.invalidateMeasure()}var i=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),r.getColumn=function(t){return t.getAttached("grid.column")},r.setColumn=function(t,i){t.setAttached("grid.column",i),e(t)},r.getColumnSpan=function(t){return t.getAttached("grid.column-span")},r.setColumnSpan=function(t,i){t.setAttached("grid.column-span",i),e(t)},r.getRow=function(t){return t.getAttached("grid.row")},r.setRow=function(t,i){t.setAttached("grid.row",i),e(t)},r.getRowSpan=function(t){return t.getAttached("grid.row-span")},r.setRowSpan=function(t,i){t.setAttached("grid.row-span",i),e(t)},r.prototype.init=function(){i.prototype.init.call(this),this.$measureOverride=t.grid.NewGridMeasureOverride(this.inputs,this.state,this.tree),this.$arrangeOverride=t.grid.NewGridArrangeOverride(this.inputs,this.state,this.tree)},Object.defineProperty(r.prototype,"rowDefinitions",{get:function(){return this.inputs.rowDefinitions},set:function(t){this.inputs.rowDefinitions=t,this.invalidateMeasure()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnDefinitions",{get:function(){return this.inputs.columnDefinitions},set:function(t){this.inputs.columnDefinitions=t,this.invalidateMeasure()},enumerable:!0,configurable:!0}),r.prototype.createInputs=function(){var t=i.prototype.createInputs.call(this);return t.rowDefinitions=[],t.columnDefinitions=[],t},r.prototype.createState=function(){var e=i.prototype.createState.call(this);return e.design=t.grid.design.NewGridDesign(),e},r.prototype.measureOverride=function(t){return this.$measureOverride(t)},r.prototype.arrangeOverride=function(t){return this.$arrangeOverride(t)},r}(t.Panel);t.Grid=i}(mirage||(mirage={}));var mirage;!function(t){function e(t){for(var e=[],r=0,n=t.split(" ");r<n.length;r++){var a=n[r];" "!==a&&e.push(i(a))}return e}function i(){var e,i=0,r=Number.POSITIVE_INFINITY;switch(arguments.length){case 1:e=t.parseGridLength(arguments[0]);break;case 2:e={value:arguments[0],type:arguments[1]};break;case 3:e=t.parseGridLength(arguments[0]),i=arguments[1],r=arguments[2];break;case 4:e={value:arguments[0],type:arguments[1]},i=arguments[2],r=arguments[3];break;default:e={value:1,type:t.GridUnitType.star}}var n=NaN;return{width:e,minWidth:i,maxWidth:r,getActualWidth:function(){return n},setActualWidth:function(t){n=t}}}t.NewColumnDefinitions=e,t.NewColumnDefinition=i}(mirage||(mirage={}));var mirage;!function(t){function e(t){var e={value:0,type:i.auto};return"auto"===t?e:"*"===t[t.length-1]?1===t.length?{value:1,type:i.star}:{value:parseInt(t.substr(0,t.length-1)),type:i.star}:{value:parseInt(t),type:i.pixel}}!function(t){t[t.auto=0]="auto",t[t.pixel=1]="pixel",t[t.star=2]="star"}(t.GridUnitType||(t.GridUnitType={}));var i=t.GridUnitType;t.parseGridLength=e}(mirage||(mirage={}));var mirage;!function(t){function e(t){for(var e=[],r=0,n=t.split(" ");r<n.length;r++){var a=n[r];" "!==a&&e.push(i(a))}return e}function i(){var e,i=0,r=Number.POSITIVE_INFINITY;switch(arguments.length){case 1:e=t.parseGridLength(arguments[0]);break;case 2:e={value:arguments[0],type:arguments[1]};break;case 3:e=t.parseGridLength(arguments[0]),i=arguments[1],r=arguments[2];break;case 4:e={value:arguments[0],type:arguments[1]},i=arguments[2],r=arguments[3];break;default:e={value:1,type:t.GridUnitType.star}}var n=NaN;return{height:e,minHeight:i,maxHeight:r,getActualHeight:function(){return n},setActualHeight:function(t){n=t}}}t.NewRowDefinitions=e,t.NewRowDefinition=i}(mirage||(mirage={}));var mirage;!function(t){var e=function(){function t(t,e){this.x=null==t?0:t,this.y=null==e?0:e}return t.isEqual=function(t,e){return t.x===e.x&&t.y===e.y},t.copyTo=function(t,e){e.x=t.x,e.y=t.y},t.round=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y)},t}();t.Point=e}(mirage||(mirage={}));var mirage;!function(t){!function(t){t[t.outside=0]="outside",t[t.inside=1]="inside",t[t.part=2]="part"}(t.RectOverlap||(t.RectOverlap={}));var e=t.RectOverlap,i=function(){function t(t,e,i,r){this.x=null==t?0:t,this.y=null==e?0:e,this.width=null==i?0:i,this.height=null==r?0:r}return t.clear=function(t){t.x=t.y=t.width=t.height=0},t.getBottom=function(t){return t.y+t.height},t.getRight=function(t){return t.x+t.width},t.isEqual=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},t.isEmpty=function(t){return 0===t.width||0===t.height},t.copyTo=function(t,e){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},t.roundOut=function(t){var e=Math.floor(t.x),i=Math.floor(t.y);t.width=Math.ceil(t.x+t.width)-e,t.height=Math.ceil(t.y+t.height)-i,t.x=e,t.y=i},t.roundIn=function(t){var e=Math.ceil(t.x),i=Math.ceil(t.y);return t.width=Math.floor(t.x+t.width)-Math.ceil(t.x),t.height=Math.floor(t.y+t.height)-Math.ceil(t.y),t.x=e,t.y=i,t},t.intersection=function(t,e){var i=Math.max(t.x,e.x),r=Math.max(t.y,e.y);t.width=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-i),t.height=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-r),t.x=i,t.y=r},t.union=function(e,i){if(!(i.width<=0||i.height<=0)){if(e.width<=0||e.height<=0)return void t.copyTo(i,e);var r=Math.min(e.x,i.x),n=Math.min(e.y,i.y);e.width=Math.max(e.x+e.width,i.x+i.width)-r,e.height=Math.max(e.y+e.height,i.y+i.height)-n,e.x=r,e.y=n}},t.isContainedIn=function(t,e){var i=t.x,r=t.y,n=t.x+t.width,a=t.y+t.height,o=e.x,h=e.y,s=e.x+e.width,u=e.y+e.height;return!(i<o||r<h||i>s||r>u)&&!(n<o||a<h||n>s||a>u)},t.containsPoint=function(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x&&t.y+t.height>=e.y},t.extendTo=function(t,e,i){var r=t.x,n=t.y,a=t.width,o=t.height;(e<r||e>r+a)&&(a=Math.max(Math.abs(e-r),Math.abs(e-r-a))),(i<n||i>n+o)&&(o=Math.max(Math.abs(i-n),Math.abs(i-n-o))),t.x=Math.min(r,e),t.y=Math.min(n,i),t.width=a,t.height=o},t.grow=function(t,e,i,r,n){return t.x-=e,t.y-=i,t.width+=e+r,t.height+=i+n,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t},t.shrink=function(t,e,i,r,n){t.x+=e,t.y+=i,t.width-=e+r,t.height-=i+n,t.width<0&&(t.width=0),t.height<0&&(t.height=0)},t.rectIn=function(i,r){var n=new t;return t.copyTo(i,n),t.intersection(n,r),t.isEmpty(n)?e.outside:t.isEqual(n,r)?e.inside:e.part},t}();t.Rect=i}(mirage||(mirage={}));var mirage;!function(t){var e=function(){function t(t,e){this.width=null==t?0:t,this.height=null==e?0:e}return t.copyTo=function(t,e){e.width=t.width,e.height=t.height},t.isEqual=function(t,e){return t.width===e.width&&t.height===e.height},t.isEmpty=function(t){return 0===t.width||0===t.height},t.max=function(t,e){t.width=Math.max(t.width,e.width),t.height=Math.max(t.height,e.height)},t.min=function(t,e){t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height)},t.round=function(t){t.width=Math.round(t.width),t.height=Math.round(t.height)},t.isUndef=function(t){return isNaN(t.width)&&isNaN(t.height)},t.clear=function(t){t.width=0,t.height=0},t.undef=function(t){t.width=NaN,t.height=NaN},t}();t.Size=e}(mirage||(mirage={}));var mirage;!function(t){var e=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.inputs.orientation},set:function(t){this.inputs.orientation!==t&&(this.inputs.orientation=t,this.invalidateMeasure(),this.invalidateArrange())},enumerable:!0,configurable:!0}),i.prototype.createInputs=function(){var i=e.prototype.createInputs.call(this);return i.orientation=t.Orientation.horizontal,i},i.prototype.measureOverride=function(e){return this.inputs.orientation===t.Orientation.vertical?this.measureVertical(e):this.measureHorizontal(e)},i.prototype.measureVertical=function(e){var i=new t.Size(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),r=new t.Size,n=this.inputs;i.width=e.width,isNaN(n.width)||(i.width=n.width),i.width=Math.min(i.width,n.maxWidth),i.width=Math.max(i.width,n.minWidth);for(var a=this.tree.walk();a.step();){var o=a.current;o.measure(i);var h=o.state.desiredSize;r.height+=h.height,r.width=Math.max(r.width,h.width)}return r},i.prototype.measureHorizontal=function(e){var i=new t.Size(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),r=new t.Size,n=this.inputs;i.height=e.height,isNaN(n.height)||(i.height=n.height),i.height=Math.min(i.height,n.maxHeight),i.height=Math.max(i.height,n.minHeight);for(var a=this.tree.walk();a.step();){var o=a.current;o.measure(i);var h=o.state.desiredSize;r.width+=h.width,r.height=Math.max(r.height,h.height)}return r},i.prototype.arrangeOverride=function(e){return this.inputs.orientation===t.Orientation.vertical?this.arrangeVertical(e):this.arrangeHorizontal(e)},i.prototype.arrangeVertical=function(e){for(var i=new t.Size(e.width,0),r=this.tree.walk();r.step();){var n=r.current,a=n.state.desiredSize,o=new t.Rect(0,i.height,e.width,a.height);t.Rect.isEmpty(o)&&t.Rect.clear(o),n.arrange(o),i.width=Math.max(i.width,e.width),i.height+=a.height}return i.height=Math.max(i.height,e.height),i},i.prototype.arrangeHorizontal=function(e){for(var i=new t.Size(0,e.height),r=this.tree.walk();r.step();){var n=r.current,a=n.state.desiredSize,o=new t.Rect(i.width,0,a.width,e.height);t.Rect.isEmpty(o)&&t.Rect.clear(o),n.arrange(o),i.width+=a.width,i.height=Math.max(i.height,e.height)}return i.width=Math.max(i.width,e.width),i},i}(t.Panel);t.StackPanel=e}(mirage||(mirage={}));var mirage;!function(t){var e=function(){function t(t,e,i,r){this.left=null==t?0:t,this.top=null==e?0:e,this.right=null==i?0:i,this.bottom=null==r?0:r}return t.add=function(t,e){t.left+=e.left,t.top+=e.top,t.right+=e.right,t.bottom+=e.bottom},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom},t.isEmpty=function(t){return 0===t.left&&0===t.top&&0===t.right&&0===t.bottom},t.isEqual=function(t,e){return t.left===e.left&&t.top===e.top&&t.right===e.right&&t.bottom===e.bottom},t.isBalanced=function(t){return t.left===t.top&&t.left===t.right&&t.left===t.bottom},t.shrinkSize=function(t,e){var i=e.width,r=e.height;return i!=Number.POSITIVE_INFINITY&&(i-=t.left+t.right),r!=Number.POSITIVE_INFINITY&&(r-=t.top+t.bottom),e.width=i>0?i:0,e.height=r>0?r:0,e},t.shrinkRect=function(t,e){e.x+=t.left,e.y+=t.top,e.width-=t.left+t.right,e.height-=t.top+t.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0)},t.shrinkCornerRadius=function(t,e){e.topLeft=Math.max(e.topLeft-.5*Math.max(t.left,t.top),0),e.topRight=Math.max(e.topRight-.5*Math.max(t.right,t.top),0),e.bottomRight=Math.max(e.bottomRight-.5*Math.max(t.right,t.bottom),0),e.bottomLeft=Math.max(e.bottomLeft-.5*Math.max(t.left,t.bottom),0)},t.growSize=function(t,e){var i=e.width,r=e.height;return i!=Number.POSITIVE_INFINITY&&(i+=t.left+t.right),r!=Number.POSITIVE_INFINITY&&(r+=t.top+t.bottom),e.width=i>0?i:0,e.height=r>0?r:0,e},t.growRect=function(t,e){e.x-=t.left,e.y-=t.top,e.width+=t.left+t.right,e.height+=t.top+t.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0)},t.growCornerRadius=function(t,e){e.topLeft=e.topLeft?Math.max(e.topLeft+.5*Math.max(t.left,t.top),0):0,e.topRight=e.topRight?Math.max(e.topRight+.5*Math.max(t.right,t.top),0):0,e.bottomRight=e.bottomRight?Math.max(e.bottomRight+.5*Math.max(t.right,t.bottom),0):0,e.bottomLeft=e.bottomLeft?Math.max(e.bottomLeft+.5*Math.max(t.left,t.bottom),0):0},t}();t.Thickness=e}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(e,i,r){return function(){var n=e.layoutSlot||void 0;return i.parent||(n=new t.Rect),n?r(n):(i.parent&&i.parent.invalidateArrange(),!1)}}function r(e,i){function r(t){}function n(t){}var a=e.state,o=e.tree;return function(){var e=a.layoutSlot||void 0;return o.parent||(e=new t.Rect,r(e),n(e)),e?i(e):(o.parent&&o.parent.invalidateArrange(),!1)}}e.NewArrangeBinder=i,e.NewSpecialArrangeBinder=r}(e=t.core||(t.core={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(i,r,n,a){return function(o){if(i.visible!==!0)return!1;var h=new t.Rect;if(i.useLayoutRounding?(h.x=Math.round(o.x),h.y=Math.round(o.y),h.width=Math.round(o.width),h.height=Math.round(o.height)):t.Rect.copyTo(o,h),h.width<0||h.height<0||!isFinite(h.width)||!isFinite(h.height)||isNaN(h.x)||isNaN(h.y)||isNaN(h.width)||isNaN(h.height))return console.warn("[mirage] cannot call arrange using rect with NaN/infinite values."),!1;if((r.flags&e.LayoutFlags.arrange)<=0)return!1;if(t.Rect.isEqual(r.layoutSlot,h))return!1;t.Rect.copyTo(h,r.layoutSlot),t.Thickness.shrinkRect(i.margin,h);var s=new t.Size(h.width,h.height);e.coerceSize(s,i);var u=new t.Size;e.coerceSize(u,i),i.horizontalAlignment===t.HorizontalAlignment.stretch&&(u.width=Math.max(u.width,s.width)),i.verticalAlignment===t.VerticalAlignment.stretch&&(u.height=Math.max(u.height,s.height));var g=new t.Size(r.hiddenDesire.width,r.hiddenDesire.height);t.Size.max(g,u);var d=a(g);r.flags&=~e.LayoutFlags.arrange,i.useLayoutRounding&&t.Size.round(d);var c=new t.Size(d.width,d.height);e.coerceSize(c,i),t.Size.min(c,d);var f=r.arrangedSlot;switch(t.Point.copyTo(h,f),i.horizontalAlignment){case t.HorizontalAlignment.left:break;case t.HorizontalAlignment.right:f.x+=h.width-c.width;break;case t.HorizontalAlignment.center:f.x+=.5*(h.width-c.width);break;default:f.x+=Math.max(.5*(h.width-c.width),0)}switch(i.verticalAlignment){case t.VerticalAlignment.top:break;case t.VerticalAlignment.bottom:f.y+=h.height-c.height;break;case t.VerticalAlignment.center:f.y+=.5*(h.height-c.height);break;default:f.y+=Math.max(.5*(h.height-c.height),0)}i.useLayoutRounding&&t.Point.round(f);var l=r.arrangedSlot;return t.Size.isEqual(l,d)||(t.Size.copyTo(l,r.lastArranged),r.flags|=e.LayoutFlags.sizeHint,n.propagateFlagUp(e.LayoutFlags.sizeHint)),t.Size.copyTo(d,r.arrangedSlot),!0}}e.NewArranger=i}(e=t.core||(t.core={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(t){function e(){return{isContainer:!0,isLayoutContainer:!1,parent:null,applyTemplate:function(){return!0},propagateFlagUp:function(t){for(var e=this.parent;e&&(e.state.flags&t)<=0;e=e.tree.parent)e.state.flags|=t},walk:function(t){return{current:void 0,step:function(){return!1}}}}}t.DefaultLayoutTree=e}(e=t.core||(t.core={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(t){!function(t){t[t.none=0]="none",t[t.measure=2]="measure",t[t.arrange=4]="arrange",t[t.measureHint=8]="measureHint",t[t.arrangeHint=16]="arrangeHint",t[t.sizeHint=32]="sizeHint",t[t.hints=56]="hints"}(t.LayoutFlags||(t.LayoutFlags={}));t.LayoutFlags}(e=t.core||(t.core={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(i,r,n){return function(){var a=i.previousAvailable;t.Size.isUndef(a)&&!r.parent&&r.isLayoutContainer&&(a.width=a.height=Number.POSITIVE_INFINITY);var o=!1;if(!t.Size.isUndef(a)){var h=new t.Size;if(t.Size.copyTo(i.desiredSize,h),o=n(a),t.Size.isEqual(h,i.desiredSize))return o}return r.parent&&r.parent.invalidateMeasure(),i.flags&=~e.LayoutFlags.measure,o}}e.NewMeasureBinder=i}(e=t.core||(t.core={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(i,r,n,a){return function(o){if(isNaN(o.width)||isNaN(o.height))return console.warn("[mirage] cannot call measure using a size with NaN values."),!1;if(i.visible!==!0)return!1;if(n.applyTemplate(),(r.flags&e.LayoutFlags.measure)<=0)return!1;var h=r.previousAvailable;if(!t.Size.isUndef(h)&&h.width===o.width&&h.height===o.height)return!1;r.flags|=e.LayoutFlags.arrange|e.LayoutFlags.arrangeHint;var s=new t.Size(o.width,o.height);t.Thickness.shrinkSize(i.margin,s),e.coerceSize(s,i);var u=a(s);return r.flags&=~e.LayoutFlags.measure,t.Size.copyTo(u,r.hiddenDesire),e.coerceSize(u,i),t.Thickness.growSize(i.margin,u),u.width=Math.min(u.width,o.width),u.height=Math.min(u.height,o.height),i.useLayoutRounding&&t.Size.round(u),t.Size.copyTo(u,r.desiredSize),!0}}e.NewMeasurer=i}(e=t.core||(t.core={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(t){function e(t,e){var i=Math.max(e.minWidth,t.width),r=Math.max(e.minHeight,t.height);isNaN(e.width)||(i=e.width),isNaN(e.height)||(r=e.height),i=Math.max(Math.min(i,e.maxWidth),e.minWidth),r=Math.max(Math.min(r,e.maxHeight),e.minHeight),e.useLayoutRounding&&(i=Math.round(i),r=Math.round(r)),t.width=i,t.height=r}t.coerceSize=e}(e=t.core||(t.core={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(t){var e=[];return{flush:function(){for(var t;null!=(t=e.shift());)t.tree.propagateFlagUp(r.arrangeHint)},prepare:function(){for(var i=t.walkDeep();i.step();){var n=i.current;n.inputs.visible&&0!==(n.state.flags&r.arrangeHint)?(n.state.flags&=~r.arrangeHint,(n.state.flags&r.arrange)>0&&e.push(n)):i.skipBranch()}return e.length>0},draft:function(){for(var t;null!=(t=e.shift());)t.doArrange();return!0}}}var r=t.core.LayoutFlags;e.NewArrangeDrafter=i}(e=t.draft||(t.draft={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(t,i){function a(){if(!t.inputs.visible)return!1;h.flush(),s.flush();var e=t.state.flags;return(e&r.measureHint)>0?o.prepare()&&o.draft():(e&r.arrangeHint)>0?h.prepare()&&h.draft():(e&r.sizeHint)>0&&(s.prepare()&&s.draft()&&s.notify())}var o=e.NewMeasureDrafter(t,i),h=e.NewArrangeDrafter(t),s=e.NewSizeDrafter(t);return function(){if(0===(t.state.flags&r.hints))return!1;for(var e=!1,i=0;i<n&&a();i++)e=!0;return i>=n&&console.error("[mirage] aborting infinite draft"),e}}var r=t.core.LayoutFlags,n=255;e.NewDrafter=i}(e=t.draft||(t.draft={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(e,i){var n=[];return{prepare:function(){var a=e.state.previousAvailable;!e.tree.isContainer||!t.Size.isUndef(a)&&t.Size.isEqual(a,i)||(e.state.flags|=r.measure,t.Size.copyTo(i,e.state.previousAvailable));for(var o=e.walkDeep();o.step();){var h=o.current;h.inputs.visible&&0!==(h.state.flags&r.measureHint)?(h.state.flags&=~r.measureHint,(h.state.flags&r.measure)>0&&n.push(h)):o.skipBranch()}return n.length>0},draft:function(){for(var t;null!=(t=n.shift());)t.doMeasure();return!0}}}var r=t.core.LayoutFlags;e.NewMeasureDrafter=i}(e=t.draft||(t.draft={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(e){var i=[],n=[];return{flush:function(){for(var t;null!=(t=i.shift());)t.tree.propagateFlagUp(r.sizeHint)},prepare:function(){for(var t=e.walkDeep();t.step();){var n=t.current;n.inputs.visible&&0!==(n.state.flags&r.sizeHint)?(n.state.flags&=~r.sizeHint,void 0!==n.state.lastArranged&&i.push(n)):t.skipBranch()}return i.length>0},draft:function(){for(var e,r=new t.Size,a=new t.Size;null!=(e=i.pop());)e.sizing(r,a),t.Size.isEqual(r,a)||(n.push({node:e,oldSize:r,newSize:a}),r=new t.Size,a=new t.Size);return n.length>0},notify:function(){for(var t;null!=(t=n.pop());)t.node.onSizeChanged(t.oldSize,t.newSize);return!0}}}var r=t.core.LayoutFlags;e.NewSizeDrafter=i}(e=t.draft||(t.draft={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){function i(e,i,r){var n=i.design.arrange;return function(i){n.init(i,e.columnDefinitions,e.rowDefinitions);for(var a=new t.Rect,o=r.walk();o.step();){var h=o.current;n.calcChildRect(a,h),h.arrange(a)}return new t.Size(i.width,i.height)}}e.NewGridArrangeOverride=i}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(t){function e(e,i,r){var n=i.design.measure,a=t.design.NewMeasureOverridePass(t.design.MeasureOverridePass.autoAuto,n,r),o=t.design.NewMeasureOverridePass(t.design.MeasureOverridePass.starAuto,n,r),h=t.design.NewMeasureOverridePass(t.design.MeasureOverridePass.autoStar,n,r),s=t.design.NewMeasureOverridePass(t.design.MeasureOverridePass.starAutoAgain,n,r),u=t.design.NewMeasureOverridePass(t.design.MeasureOverridePass.nonStar,n,r),g=t.design.NewMeasureOverridePass(t.design.MeasureOverridePass.remainingStar,n,r);return function(t){return n.init(t,e.columnDefinitions,e.rowDefinitions,r),a(),o(),h(),s(),u(),g(),n.finish(),n.getDesired()}}t.NewGridMeasureOverride=e}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){var i;!function(e){function i(i,n){return{init:function(a,o,h){r(i),r(n);var s=new t.Size(e.helpers.calcDesiredToOffered(i),e.helpers.calcDesiredToOffered(n));if(s.width!==a.width&&e.helpers.expand(a.width,i),s.height!==a.height&&e.helpers.expand(a.height,n),o)for(var u=0;u<o.length;u++)o[u].setActualWidth(i[u][u].offered);if(h)for(var u=0;u<h.length;u++)h[u].setActualHeight(n[u][u].offered)},calcChildRect:function(e,r){t.Rect.clear(e);var a=t.Grid.getColumn(r)||0;a=Math.min(a,i.length-1);var o=t.Grid.getColumnSpan(r);0!==o&&(o=o||1),o=Math.min(o,i.length-a);var h=t.Grid.getRow(r)||0;h=Math.min(h,n.length-1);var s=t.Grid.getRowSpan(r);0!==s&&(s=s||1),s=Math.min(s,n.length-h);for(var u=0;u<a;u++)e.x+=i[u][u].offered;for(var u=a;u<a+o;u++)e.width+=i[u][u].offered;for(var u=0;u<h;u++)e.y+=n[u][u].offered;for(var u=h;u<h+s;u++)e.height+=n[u][u].offered}}}function r(t){for(var e=0;e<t.length;e++)for(var i=0;i<=e;i++)t[e][i].offered=t[e][i].original}e.NewGridArrangeDesign=i}(i=e.design||(e.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(t){var e;!function(t){function e(t,e){var i=[],r=[];return{init:function(){i.length=0,r.length=0},add:function(n,a,o,h){var s={matrix:n?e:t,start:a,end:a+o-1,size:h};s.start===s.end?i.unshift(s):r.push(s)},allocate:function(t){for(var e;null!=(e=i.pop());){var n=e.start,a=e.end;e.matrix[n][a].desired=Math.max(e.matrix[n][a].desired,e.size),t()}for(;null!=(e=r.pop());){var n=e.start,a=e.end;e.matrix[n][a].desired=Math.max(e.matrix[n][a].desired,e.size),t()}}}}t.NewGridPlacement=e}(e=t.design||(t.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){var i;!function(e){function i(t){for(var e=!1,i=!1,r=!1,n=0;n<t.length;n++){var a=t[n];e=e||a.autoRow&&a.autoCol&&!a.starRow&&!a.starCol,i=i||a.starRow&&a.autoCol,r=r||a.autoRow&&a.starCol}return{hasAutoAuto:e,hasStarAuto:i,hasAutoStar:r}}e.NewGridShape=i;var r=function(){function i(){}return i.prototype.init=function(e,i,r){var n=this.col=Math.min(t.Grid.getColumn(e),i.length-1);isNaN(n)&&(this.col=n=0);var a=this.row=Math.min(t.Grid.getRow(e),r.length-1);isNaN(a)&&(this.row=a=0);var o=this.colspan=Math.min(t.Grid.getColumnSpan(e),i.length-n);isNaN(o)&&(this.colspan=o=1);var h=this.rowspan=Math.min(t.Grid.getRowSpan(e),r.length-a);isNaN(h)&&(this.rowspan=h=1),this.starRow=this.autoRow=this.starCol=this.autoCol=!1;for(var s=a;s<a+h;s++)this.starRow=this.starRow||r[s][s].type===t.GridUnitType.star,this.autoRow=this.autoRow||r[s][s].type===t.GridUnitType.auto;for(var s=n;s<n+o;s++)this.starCol=this.starCol||i[s][s].type===t.GridUnitType.star,this.autoCol=this.autoCol||i[s][s].type===t.GridUnitType.auto},i.prototype.shouldMeasurePass=function(t,i,r){return i.width=i.height=0,this.autoRow&&this.autoCol&&!this.starRow&&!this.starCol?r===e.MeasureOverridePass.autoAuto&&(i.width=Number.POSITIVE_INFINITY,i.height=Number.POSITIVE_INFINITY,
!0):this.starRow&&this.autoCol&&!this.starCol?(r===e.MeasureOverridePass.starAuto||r===e.MeasureOverridePass.starAutoAgain)&&(r===e.MeasureOverridePass.autoAuto&&t.hasAutoStar&&(i.height=Number.POSITIVE_INFINITY),i.width=Number.POSITIVE_INFINITY,!0):this.autoRow&&this.starCol&&!this.starRow?r===e.MeasureOverridePass.autoStar&&(i.height=Number.POSITIVE_INFINITY,!0):!this.autoRow&&!this.autoCol||this.starRow||this.starCol?this.starRow||this.starCol?r===e.MeasureOverridePass.remainingStar:r===e.MeasureOverridePass.nonStar:r===e.MeasureOverridePass.nonStar&&(this.autoRow&&(i.height=Number.POSITIVE_INFINITY),this.autoCol&&(i.width=Number.POSITIVE_INFINITY),!0)},i.prototype.calcConstraint=function(t,e,i){for(var r=this.row;r<this.row+this.rowspan;r++)t.height+=i[r][r].offered;for(var r=this.col;r<this.col+this.colspan;r++)t.width+=e[r][r].offered},i}();e.GridChildShape=r}(i=e.design||(e.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){var i;!function(e){var i;!function(e){function i(e,i){for(var n=0;n<i.length;n++){var a=i[n][n];a.type===t.GridUnitType.star?a.offered=0:e=Math.max(e-a.offered,0)}r(i,0,i.length-1,e,t.GridUnitType.star,!1)}function r(e,i,r,n,a,o){for(var h=0,s=!1,u=0,g=i;g<=r;g++){var d=e[g][g];u=o?d.desired:d.offered,u<d.max&&(h+=a===t.GridUnitType.star?d.stars:1)}do{s=!1;for(var c=n/h,g=i;g<=r;g++){var d=e[g][g];if(u=o?d.desired:d.offered,d.type===a&&u<d.max){var f=u;f+=c*(a===t.GridUnitType.star?d.stars:1),f=Math.min(f,d.max),s=s||f>u,n-=f-u,o?d.desired=f:d.offered=f}}}while(s);return n}function n(t){for(var e=0,i=0;i<t.length;i++)e+=t[i][i].offered=t[i][i].desired;return e}e.expand=i,e.assignSize=r,e.calcDesiredToOffered=n}(i=e.helpers||(e.helpers={}))}(i=e.design||(e.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(t){var e;!function(t){function e(){var e=[],i=[];return{measure:t.NewGridMeasureDesign(e,i),arrange:t.NewGridArrangeDesign(e,i)}}t.NewGridDesign=e}(e=t.design||(t.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){var i;!function(e){function i(i,h){var s,u=[],g=e.NewGridPlacement(i,h);return{init:function(t,o,d,c){r(i,o?o.length||1:1),r(h,d?d.length||1:1),n(i,o),a(h,d);for(var f=0,l=c.walk();l.step();f++){var p;f<u.length?u[f]=u[f]||new e.GridChildShape:u.push(p=new e.GridChildShape),p.init(l.current,i,h)}f<u.length&&u.slice(f,u.length-f),s=e.NewGridShape(u),g.init(),c.children.length>0&&(e.helpers.expand(t.width,i),e.helpers.expand(t.height,h))},measureChild:function(r,n,a){var o=u[n],d=new t.Size;if(o&&o.shouldMeasurePass(s,d,r)){o.calcConstraint(d,i,h),a.measure(d);var c=a.state.desiredSize;r!==e.MeasureOverridePass.starAuto&&g.add(!0,o.row,o.rowspan,c.height),g.add(!1,o.col,o.colspan,c.width)}},finishPass:function(){g.allocate(o(i,h))},finish:function(){for(var t=0;t<i.length;t++)for(var e=0;e<=t;e++)i[t][e].original=i[t][e].offered;for(var t=0;t<h.length;t++)for(var e=0;e<=t;e++)h[t][e].original=h[t][e].offered},getDesired:function(){for(var e=new t.Size,r=0;r<i.length;r++)e.width+=i[r][r].desired;for(var r=0;r<h.length;r++)e.height+=h[r][r].desired;return e}}}function r(t,i){t.length>i&&t.splice(i,t.length-i);for(var r=0;r<i;r++){t.length<=r&&t.push([]);var n=t[r];n.length>r+1&&n.splice(r,n.length-r-1);for(var a=0;a<=r;a++)n.length<=a?n.push(new e.Segment):e.Segment.init(n[a])}}function n(i,r){if(!r||0===r.length){var n=i[0][0];return n.type=t.GridUnitType.star,void(n.stars=1)}for(var a=0;a<r.length;a++){var o=r[a],s=o.width||h;o.setActualWidth(Number.POSITIVE_INFINITY);var u=e.Segment.init(i[a][a],0,o.minWidth,o.maxWidth,s.type);s.type===t.GridUnitType.pixel?(u.desired=u.offered=u.clamp(s.value),o.setActualWidth(u.desired)):s.type===t.GridUnitType.star?u.stars=s.value:s.type===t.GridUnitType.auto&&(u.desired=u.offered=u.clamp(0))}}function a(i,r){if(!r||0===r.length){var n=i[0][0];return n.type=t.GridUnitType.star,void(n.stars=1)}for(var a=0;a<r.length;a++){var o=r[a],s=o.height||h;o.setActualHeight(Number.POSITIVE_INFINITY);var u=e.Segment.init(i[a][a],0,o.minHeight,o.maxHeight,s.type);s.type===t.GridUnitType.pixel?(u.desired=u.offered=u.clamp(s.value),o.setActualHeight(u.desired)):s.type===t.GridUnitType.star?u.stars=s.value:s.type===t.GridUnitType.auto&&(u.desired=u.offered=u.clamp(0))}}function o(i,r){function n(e,i,r){for(var n=!1,a=i;a>=r;a--)n=n||e[a][a].type===t.GridUnitType.star;return n}function a(t,e,i){for(var r=0,n=e;n>=i;n--)r+=t[n][n].desired;return r}function o(i){for(var r=i.length,o=r-1;o>=0;o--)for(var h=o;h>=0;h--){var s=n(i,o,h),u=i[o][h].desired,g=a(i,o,h),d=u-g;d>0&&(s?e.helpers.assignSize(i,h,o,d,t.GridUnitType.star,!0):(e.helpers.assignSize(i,h,o,d,t.GridUnitType.pixel,!0),e.helpers.assignSize(i,h,o,d,t.GridUnitType.auto,!0)))}}return function(){o(r),o(i),e.helpers.calcDesiredToOffered(r),e.helpers.calcDesiredToOffered(i)}}e.NewGridMeasureDesign=i;var h={value:1,type:t.GridUnitType.star}}(i=e.design||(e.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i){return function(){for(var r=i.walk(),n=0;r.step();n++)e.measureChild(t,n,r.current);e.finishPass()}}!function(t){t[t.autoAuto=0]="autoAuto",t[t.starAuto=1]="starAuto",t[t.autoStar=2]="autoStar",t[t.starAutoAgain=3]="starAutoAgain",t[t.nonStar=4]="nonStar",t[t.remainingStar=5]="remainingStar"}(t.MeasureOverridePass||(t.MeasureOverridePass={}));t.MeasureOverridePass;t.NewMeasureOverridePass=e}(e=t.design||(t.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));var mirage;!function(t){var e;!function(e){var i;!function(e){var i=function(){function e(){this.desired=0,this.offered=0,this.original=0,this.min=0,this.max=Number.POSITIVE_INFINITY,this.stars=0,this.type=t.GridUnitType.pixel}return e.prototype.clamp=function(t){return t<this.min?this.min:t>this.max?this.max:t},e.init=function(e,i,r,n,a){return e.desired=0,e.stars=0,e.offered=i||0,e.min=r||0,e.max=null!=n?n:Number.POSITIVE_INFINITY,e.type=null!=a?a:t.GridUnitType.pixel,e.offered<r?e.offered=r:e.offered>n&&(e.offered=n),e},e}();e.Segment=i}(i=e.design||(e.design={}))}(e=t.grid||(t.grid={}))}(mirage||(mirage={}));
//# sourceMappingURL=mirage.min.js.map
